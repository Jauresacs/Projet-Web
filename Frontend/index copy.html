<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Board - Home</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/css-animations/3.0.0/css-animations.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="#">JobHunt</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="#about">About Us</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#features">Features</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#contact">Contact Us</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="job-offers.html">job offers</a>
            </li>
        </ul>
        <div class="navbar-nav">
            <button class="btn btn-outline-primary mr-2" data-toggle="modal" data-target="#signInModal">Sign In</button>
            <button class="btn btn-primary" data-toggle="modal" data-target="#signUpModal">Sign Up</button>
        </div>
    </div>
</nav>

<!-- Sign In Modal -->
<div class="modal fade" id="signInModal" tabindex="-1" role="dialog" aria-labelledby="signInModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="signInModalLabel">Sign In</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="signInForm">
                    <div class="form-group">
                        <label for="emailSignIn">Email address</label>
                        <input type="email" class="form-control" id="emailSignIn" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="passwordSignIn">Password</label>
                        <input type="password" class="form-control" id="passwordSignIn" placeholder="Enter your password" required>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg btn-block">Sign In</button>
                    </div>
                </form>
                <p class="text-center mt-3"> Don't have an account ? <a href="#" data-toggle="modal" data-target="#signUpModal" data-dismiss="modal">Sign Up</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Sign Up Modal -->
<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" aria-labelledby="signUpModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="signUpModalLabel">Sign Up</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="signUpForm">
                    <div class="form-group">
                        <label for="username">Name</label>
                        <input type="text" class="form-control" id="username" placeholder="Your Name" required>
                    </div>
                    <div class="form-group">
                        <label for="emailSignUp">Email address</label>
                        <input type="email" class="form-control" id="emailSignUp" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="passwordSignUp">Password</label>
                        <input type="password" class="form-control" id="passwordSignUp" placeholder="Enter your password" required>
                    </div>
                    <div class="form-group">
                        <label>Account Type</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="accountType" id="candidate" value="candidate" required>
                            <label class="form-check-label" for="candidate">Candidate</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="accountType" id="recruiter" value="recruiter" required>
                            <label class="form-check-label" for="recruiter">Recruiter</label>
                        </div>
                    </div>
                    <div class="form-group form-check">
                        <input type="checkbox" class="form-check-input" id="termsCheck" required>
                        <label class="form-check-label" for="termsCheck">I accept the terms & conditions</label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg btn-block">Sign Up</button>
                </form>
                <p class="text-center mt-3"> Already have an account ? <a href="#" data-toggle="modal" data-target="#signInModal" data-dismiss="modal">Sign In</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Header Section -->
<header>
    <div class="container header-box" data-aos="zoom-in">
        <h1>Welcome to Job Hunt</h1>
        <p>Find your dream job with us</p>
        <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#signUpModal">Get Started</a>
    </div>
</header>



<!-- About Us Section -->
<section id="about" class="py-5 section-container">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">About Us</h2>
        <div class="row">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="about-item text-center">
                    <i class="fas fa-users fa-3x mb-3"></i>
                    <h4>Our Mission</h4>
                    <p>At Job Board, our mission is to connect talented individuals with top employers and streamline the job search process.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                <div class="about-item text-center">
                    <i class="fas fa-briefcase fa-3x mb-3"></i>
                    <h4>What We Offer</h4>
                    <p>We offer an advanced platform for job seekers and employers, making recruitment faster, more efficient, and more accessible for everyone.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                <div class="about-item text-center">
                    <i class="fas fa-globe fa-3x mb-3"></i>
                    <h4>Global Reach</h4>
                    <p>With a global network of opportunities, Job Board helps you connect with companies and positions that align with your career goals.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="py-5 section-container">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Features</h2>
        <div class="row">
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-item text-center">
                    <i class="fas fa-search fa-3x mb-3"></i>
                    <h4>Advanced Job Search</h4>
                    <p>Use powerful filters to search for jobs by location, salary, industry, and more.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-item text-center">
                    <i class="fas fa-comments fa-3x mb-3"></i>
                    <h4>Integrated Messaging</h4>
                    <p>Communicate directly with employers and recruiters through our built-in messaging system, making it easier to ask questions and schedule interviews.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-item text-center">
                    <i class="fas fa-certificate fa-3x mb-3"></i>
                    <h4>Global Opportunities</h4>
                    <p>Connect with job opportunities and talent from around the world. Whether you’re looking for remote positions or local roles, Job Board helps you find what you need.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Us Section -->
<section id="contact" class="py-5 bg-light" data-aos="fade-up">
    <div class="container">
        <h2 class="section-title" data-aos="fade-up">Contact Us</h2>
        <form id="contactForm">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
                <label for="message">Message</label>
                <textarea class="form-control" id="message" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Send Message</button>
            <div id="successMessage" style="display:none; color:#d32313;"> Thank you for your message !!! </div>
        </form>
    </div>
</section>

<!-- Recruiter Information Modal -->
<div class="modal fade" id="recruiterInfoModal" tabindex="-1" role="dialog" aria-labelledby="recruiterInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="recruiterInfoModalLabel">Recruiter Information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="recruiterInfoForm">
                    <div class="form-group">
                        <label for="companyName">Company Name</label>
                        <input type="text" class="form-control" id="companyName" placeholder="Enter company name" required>
                    </div>
                    <div class="form-group">
                        <label for="companyDescription">Description</label>
                        <textarea class="form-control" id="companyDescription" placeholder="Company description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="companyWebsite">Website</label>
                        <input type="url" class="form-control" id="companyWebsite" placeholder="Enter company website" required>
                    </div>
                    <div class="form-group">
                        <label for="companyAddress">Address</label>
                        <input type="text" class="form-control" id="companyAddress" placeholder="Enter company address" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Candidate Information Modal -->
<!-- <div class="modal fade" id="candidateInfoModal" tabindex="-1" role="dialog" aria-labelledby="candidateInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="candidateInfoModalLabel">Candidate Information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="candidateInfoForm">
                    <div class="form-group">
                        <label for="occupation">Occupation</label>
                        <input type="text" class="form-control" id="occupation" placeholder="Enter your occupation" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div> -->

<footer class="text-center py-4">
    <p>&copy; 2024 Job Board. All rights reserved.</p>
</footer>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.1/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
<script>
    // AOS Initialization (Librairie AOS pour les animations d'apparition)
    AOS.init();

    // Confetti Effect lors de l'envoi du formulaire Contact
    document.querySelector('#contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
        });

        // Réinitialisation du formulaire
        document.getElementById('contactForm').reset();
        console.log('Formulaire réinitialisé');
        
        // Afficher le message de succès
        document.getElementById('successMessage').style.display = 'block';
        
        // Cacher le message de succès après 3 secondes
        setTimeout(function() {
            document.getElementById('successMessage').style.display = 'none';
        }, 3000);
    });

   // Fonction pour gérer l'inscription
async function signUpUser() {
    const name = document.getElementById('username').value;
    const email = document.getElementById('emailSignUp').value;
    const password = document.getElementById('passwordSignUp').value;
    const accountType = document.querySelector('input[name="accountType"]:checked').value;

    try {
        const response = await fetch('http://localhost:5027/Users/Register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                Nom: name,
                Email: email,
                passwordHash: password,
                Role: accountType
            })
        });

        if (!response.ok) {
            throw new Error('Erreur lors de l\'inscription');
        }

        const data = await response.json();

        // Enregistrer le token et le rôle dans le localStorage
        localStorage.setItem('authToken', data.token);
        localStorage.setItem('userRole', accountType);

        // Afficher le modal d'informations supplémentaires ou rediriger directement
        if (accountType === 'recruiter') {
            $('#signUpModal').modal('hide');
            $('#recruiterInfoModal').modal('show');
        } else if (accountType === 'candidate') {
            $('#signUpModal').modal('hide');
            window.location.href = 'dashboard_candidate.html';
            // $('#candidateInfoModal').modal('show');
        } else if (accountType === 'admin') {
            $('#signUpModal').modal('hide');
            window.location.href = 'dashboard_admin.html'; 
        }

    } catch (error) {
        console.error('Erreur:', error);
    }
}

// Soumettre le formulaire d'inscription
document.getElementById('signUpForm').addEventListener('submit', function(e) {
    e.preventDefault();
    signUpUser();
});

// Fonction pour soumettre les informations du recruteur
async function submitRecruiterInfo() {
    const Name = document.getElementById('companyName').value;
    const Description = document.getElementById('companyDescription').value;
    const SiteWeb = document.getElementById('companyWebsite').value;
    const Adresse = document.getElementById('companyAddress').value;

    try {
        const response = await fetch('http://localhost:5027/Recruteurs/SetEntreprise', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + localStorage.getItem('authToken')
            },
            body: JSON.stringify({
                Name,
                Description,
                SiteWeb,
                Adresse
            })
        });

        if (!response.ok) {
            throw new Error('Erreur lors de l\'enregistrement des informations du recruteur');
        }

        $('#recruiterInfoModal').modal('hide');
        window.location.href = 'dashboard_recruiter.html';

    } catch (error) {
        console.error('Erreur:', error);
    }
}

// Soumettre le formulaire du recruteur
document.getElementById('recruiterInfoForm').addEventListener('submit', function(e) {
    e.preventDefault();
    submitRecruiterInfo();
});

    // Fonction pour gérer la connexion
    async function loginUser() {
        const email = document.getElementById('emailSignIn').value;
        const password = document.getElementById('passwordSignIn').value;

        try {
            const response = await fetch('http://localhost:5027/Users/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            if (!response.ok) {
                throw new Error('Erreur lors de la connexion');
            }

            const data = await response.json();

            // Enregistrer le token et le rôle dans le localStorage
            localStorage.setItem('authToken', data.token);
            localStorage.setItem('userRole', data.role);

            // Rediriger en fonction du rôle
            if (data.role === 'candidate') {
                window.location.href = 'dashboard_candidate.html';
            } else if (data.role === 'recruiter') {
                window.location.href = 'dashboard_recruiter.html';
            }
        } catch (error) {
            console.error('Erreur:', error);
        }
    }

    // Soumettre le formulaire de connexion
    document.getElementById('signInForm').addEventListener('submit', function(e) {
        e.preventDefault();
        loginUser();
    });

    // Fonction pour le Contact Us 
    async function sendMessage() {
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const message = document.getElementById('message').value;
    
        try {
            const response = await fetch('https://example.com/api/contact', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    name: name,
                    email: email,
                    message: message
                })
            });
    
            if (!response.ok) {
                throw new Error('Erreur lors de l\'envoi du message');
            }
    
            const data = await response.json();
            console.log('Message envoyé avec succès:', data);
    
            // Réinitialiser le formulaire après succès
            document.getElementById('contactForm').reset();
            
            // Afficher un message de succès
            document.getElementById('successMessage').style.display = 'block';
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
            }, 3000);
        } catch (error) {
            console.error('Erreur:', error);
        }
    }
    
    // Soumettre le formulaire "Contact Us"
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        sendMessage();
    });
</script>
</body>
</html>